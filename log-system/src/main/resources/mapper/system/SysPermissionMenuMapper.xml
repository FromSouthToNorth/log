<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="vip.hyzt.system.mapper.SysPermissionMenuMapper">

    <resultMap id="SysPermissionMenuResult" type="SysPermissionMenu">
        <id     property="menuId"       column="menu_id" />
        <result property="menuName"     column="menu_name" />
        <result property="parentId"     column="parent_id" />
        <result property="orderNum"     column="order_num" />
        <result property="path"         column="path" />
        <result property="component"    column="component" />
        <result property="isFrame"      column="is_frame" />
        <result property="isCache"      column="is_cache" />
        <result property="menuType"     column="menu_type" />
        <result property="visible"      column="visible" />
        <result property="status"       column="status" />
        <result property="perms"        column="perms" />
        <result property="icon"         column="icon" />
        <result property="createBy"     column="create_by" />
        <result property="createTime"   column="create_time" />
        <result property="updateBy"     column="update_by" />
        <result property="updateTime"   column="update_time" />
    </resultMap>

    <select id="selectPermissionMenuByUserId" parameterType="String" resultType="String">
        select disconnect spm.perms
        from sys_permission_menu spm
                 left join sys_role_permission srp
                           on srp.permission_id = spm.menu_id
                 left join sys_user_role sur
                           on sur.role_id = srp.permission_id
                 left join sys_role r
                           on r.role_id = sur.role_id
        where spm.status = 0 and r.status = 0 and sur.user_id = #{userId}
    </select>

</mapper>